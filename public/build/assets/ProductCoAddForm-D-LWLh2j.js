import{E as Y}from"./base-Brf_yBAJ.js";import{E as h}from"./el-overlay-DlhaYkCE.js";/* empty css                     */import{E as ee,a as oe}from"./el-col-B9g1VTzX.js";import{E as le}from"./el-button-DwHekHmB.js";import{E as te,a as ae}from"./el-radio-CvcXfOKM.js";import{E as ne}from"./el-color-picker-IVF2g1C9.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";import{E as se}from"./el-popper-BSwFi-Wn.js";import{E as ie}from"./el-checkbox-DA4NrgcO.js";import{f as L,p as re,r as w,g as de,h as D,i as b,j as P,L as B,b as i,a as o,w as l,N as ue,o as f,c as N,d as c,k as me}from"./app-lsMHx7PK.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as pe,a as fe}from"./index-Dn9SAAZu.js";import{E as _e}from"./index-CiH_2dzV.js";import"./vnode-DOoyDGs4.js";import"./icon-Domd4CnA.js";import"./refs-DiFgKJQR.js";import"./index-VxK2knAE.js";import"./get-D4Sx4Yju.js";import"./isArray-Dxzbedgu.js";import"./event-BB_Ol6Sd.js";import"./aria-n-U01RP3.js";import"./use-form-common-props-D5ONMDRx.js";import"./index-6SUpneNt.js";import"./typescript-Bp3YSIOJ.js";import"./index-W2FmbPXI.js";import"./index-BDtxBZdR.js";import"./index-DP1aPUMi.js";import"./isEqual-CcYuS3NO.js";import"./_Uint8Array-CLotSVly.js";import"./castArray-Ce6QuK0j.js";import"./_baseClone-DtuwuByR.js";import"./_initCloneObject-Cco93VoI.js";import"./index-BjFHEJIc.js";const ge={class:"new_co_row"},we={class:"demo-color-block"},ve={class:"demonstration"},Ce={key:0,class:"icon_gp"},be={key:0,class:"custom-file-wrapper"},Re=["src"],Ve={class:"file-actions"},Ee={style:{margin:"10px 0"}},ke=["src"],De={__name:"ProductCoAddForm",props:{newCoRowData:Object,newCoRowVisible:Boolean,fileListAdd_co:Array,color_options_data:Array},emits:["update:fileListAdd_co","update:newCoRowData","toggle-add","toggle-add-btn","remove-verify"],setup(a,{expose:q,emit:z}){const _=a,p=L(()=>_.fileListAdd_co),r=z,R=L(()=>_.color_options_data.some(n=>n.color_name==="組合色")),T=re({color_name:[{required:!0,message:"顏色名稱為必填項",trigger:"blur"}],color_code:[{required:!0,message:"顏色為必填項",trigger:"blur"}],price:[{required:!0,message:"價格為必填項",trigger:"blur"},{type:"number",message:"需為數字類型",trigger:"blur"}],enable:[{required:!0,message:"請選擇顯示或隱藏",trigger:"submit"}],image:[{validator:(n,e,s)=>{if(p.value.length===0)s();else{const u=p.value[0].file;["image/jpeg","image/png","image/gif"].includes(u.type)?s():s(new Error("圖片格式僅限 jpg/png/gif"))}},trigger:"change"}]}),j=()=>new Promise((n,e)=>{g.value?g.value.validate(s=>{s?n(!0):e(!1)}):e(new Error("newCoFormRef 未綁定"))}),y=w(""),V=w(!1),Z=n=>{const e=n.target.files[0];if(e){const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{r("update:fileListAdd_co",[{name:e.name,url:s.result,file:e}])}}},$=n=>{r("update:fileListAdd_co",[])},G=n=>{V.value=!0,y.value=n.url},A=()=>{x.value.click()},x=w(null),M=()=>{r("toggle-add")},F=()=>{r("toggle-add-btn"),d.value=!1},g=w(),O=()=>{g.value.resetFields()},d=w(!1);return q({newCoFormRef:g,colorAddFormValidate:j,resetFields:O}),de(d,n=>{r("update:newCoRowData",{..._.newCoRowData,color_name:n?"組合色":"",color_code:n?"combo":""}),r("remove-verify")}),(n,e)=>{const s=_e,u=fe,E=ie,k=se,m=ee,S=ne,I=te,H=ae,J=D("ZoomIn"),v=Y,K=D("Delete"),U=D("Plus"),C=le,Q=oe,W=pe,X=h;return f(),b(ue,null,[P(i("div",ge,[o(W,{model:a.newCoRowData,ref_key:"newCoFormRef",ref:g,rules:T},{default:l(()=>[o(Q,null,{default:l(()=>[o(m,{class:"custom-color_name"},{default:l(()=>[o(u,{prop:"color_name"},{default:l(()=>[o(s,{modelValue:a.newCoRowData.color_name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.newCoRowData.color_name=t),placeholder:"輸入顏色名稱",size:"small",disabled:d.value,onInput:e[1]||(e[1]=t=>r("update:newCoRowData",{..._.newCoRowData,color_name:t}))},null,8,["modelValue","disabled"])]),_:1}),R.value?(f(),N(k,{key:0,content:"組合色已存在，無法再新增",placement:"top"},{default:l(()=>[i("span",null,[o(E,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),disabled:R.value},{default:l(()=>e[11]||(e[11]=[c(" 組合色 ")])),_:1},8,["modelValue","disabled"])])]),_:1})):(f(),N(E,{key:1,modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),disabled:R.value},{default:l(()=>e[12]||(e[12]=[c(" 組合色 ")])),_:1},8,["modelValue","disabled"]))]),_:1}),o(m,null,{default:l(()=>[o(u,{prop:"color_code"},{default:l(()=>[i("div",we,[o(k,{class:"box-item",effect:"dark",content:"選取產品顏色",placement:"top"},{default:l(()=>[i("span",ve,[o(S,{modelValue:a.newCoRowData.color_code,"onUpdate:modelValue":e[4]||(e[4]=t=>a.newCoRowData.color_code=t),disabled:d.value,onChange:e[5]||(e[5]=t=>r("update:newCoRowData",{..._.newCoRowData,color_code:t}))},null,8,["modelValue","disabled"])])]),_:1})])]),_:1})]),_:1}),o(m,null,{default:l(()=>[o(u,{prop:"price"},{default:l(()=>[o(s,{modelValue:a.newCoRowData.price,"onUpdate:modelValue":e[6]||(e[6]=t=>a.newCoRowData.price=t),modelModifiers:{number:!0},placeholder:"輸入價格",size:"small"},null,8,["modelValue"])]),_:1})]),_:1}),o(m,null,{default:l(()=>[o(u,{prop:"enable"},{default:l(()=>[o(H,{modelValue:a.newCoRowData.enable,"onUpdate:modelValue":e[7]||(e[7]=t=>a.newCoRowData.enable=t)},{default:l(()=>[o(I,{value:1},{default:l(()=>e[13]||(e[13]=[c("顯示")])),_:1}),o(I,{value:0},{default:l(()=>e[14]||(e[14]=[c("隱藏")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(m,null,{default:l(()=>[o(u,{prop:"image"},{default:l(()=>[a.newCoRowVisible?(f(),b("div",Ce,[i("input",{ref_key:"fileInput",ref:x,type:"file",class:"hidden-input",onChange:Z},null,544),p.value.length>0?(f(),b("div",be,[i("img",{src:p.value[0].url,class:"upload-img"},null,8,Re),i("div",Ve,[o(v,{class:"action-icon",onClick:e[8]||(e[8]=t=>G(p.value[0]))},{default:l(()=>[o(J)]),_:1}),o(v,{class:"action-icon",onClick:e[9]||(e[9]=t=>$(p.value[0]))},{default:l(()=>[o(K)]),_:1}),o(v,{class:"action-icon plus-icon",onClick:A},{default:l(()=>[o(U)]),_:1})])])):(f(),b("div",{key:1,class:"upload-placeholder",onClick:A},[o(k,{class:"box-item",effect:"dark",content:"上傳檔案",placement:"top-start"},{default:l(()=>[o(C,null,{default:l(()=>[o(v,null,{default:l(()=>[o(U)]),_:1})]),_:1})]),_:1})]))])):me("",!0)]),_:1})]),_:1}),o(m,null,{default:l(()=>[o(u,null,{default:l(()=>[i("div",null,[o(C,{size:"small",type:"success",onClick:M},{default:l(()=>e[15]||(e[15]=[c(" 新增 ")])),_:1}),o(C,{size:"small",onClick:F},{default:l(()=>e[16]||(e[16]=[c(" 取消 ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])],512),[[B,a.newCoRowVisible]]),o(m,{style:{"margin-right":"10px",display:"inline-block"}},{default:l(()=>[i("div",Ee,[P(o(C,{onClick:F},{default:l(()=>e[17]||(e[17]=[c("添加顏色")])),_:1},512),[[B,!a.newCoRowVisible]])])]),_:1}),o(X,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=t=>V.value=t),style:{width:"max-content"},"align-center":""},{default:l(()=>[i("img",{"w-full":"",src:y.value,alt:"Preview Image"},null,8,ke)]),_:1},8,["modelValue"])],64)}}},io=ce(De,[["__scopeId","data-v-9251d27c"]]);export{io as default};
