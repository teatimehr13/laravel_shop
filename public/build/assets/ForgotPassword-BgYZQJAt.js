import{E as g}from"./base-y2bNDJ1N.js";import{r as m,T as k,f as w,g as E,h as F,i as r,b as e,a as p,e as B,j as V,v as C,u as o,n as I,c as S,w as T,k as c,t as v,o as n}from"./app-DexmQPYs.js";import{H as j}from"./HelloAnimation-ConqcvNY.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"bg-base h-full flex flex-col min-h-screen"},z={class:"flex-1"},D={class:"mt-10 mb-6 flex items-center justify-center"},H={class:"mx-auto max-w-96 space-y-4 p-4 mb-4"},M={class:"border-card border divide-y rounded-md"},P={class:"px-6 py-4"},W={class:"mb-4"},A={class:"block"},U={class:"relative"},q={key:0,class:"mt-2 text-red-600 text-sm"},G={key:1,class:"mt-2 text-red-600 text-sm"},J=["disabled"],K={key:0,class:"text-orange-600 text-sm mt-2"},L={key:1,class:"mb-4 font-medium text-sm text-green-600 mt-2"},O={__name:"ForgotPassword",props:{status:{type:String}},setup(f){const a=m(0),u=m(null),d=m(!0),i=m(!1),t=k({email:"",submitted:!1}),_=w(()=>{const l=t.email;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)}),x=()=>{u.value=null,i.value=!1,t.post(route("password.email"),{onError:l=>{const s=l.email||[];typeof s=="string"&&s.includes("寄送上限")&&(d.value=!1)},onFinish:()=>{},onBefore:()=>{if(t.submitted=!0,!t.email||!_.value)return i.value=!0,!1;if(!d.value)return!1;if(a.value>0)return u.value=`請稍後再試，還有 ${a.value} 秒才能再次寄送。`,!1},onSuccess:()=>{d.value=!0,a.value=60;const l=setInterval(()=>{a.value--,a.value<=0&&clearInterval(l)},1e3)}})};return E(()=>t.email,l=>{t.submitted&&_.value&&(i.value=!1)}),(l,s)=>{const b=F("WarnTriangleFilled"),h=g;return n(),r("div",$,[e("div",z,[e("nav",D,[p(j)]),e("main",null,[e("div",H,[e("div",M,[s[2]||(s[2]=e("div",{class:"px-6 py-3"},[e("h1",{class:"text-strong font-medium text-2xl font-bold"}," 忘記密碼 ")],-1)),e("div",P,[e("form",{onSubmit:B(x,["prevent"])},[e("div",W,[e("label",A,[s[1]||(s[1]=e("span",{class:"block text-sm font-medium text-slate-700"},"Email",-1)),e("div",U,[V(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=y=>o(t).email=y),class:I(["input-style",{"input-invalid":i.value||o(t).errors.email}]),placeholder:"yourEmail@example.com",autofocus:""},null,2),[[C,o(t).email]]),i.value||o(t).errors.email?(n(),S(h,{key:0,class:"input-invalid-mark",size:"large"},{default:T(()=>[p(b)]),_:1})):c("",!0)]),i.value?(n(),r("p",q," 請輸入正確的Email ")):o(t).errors.email?(n(),r("div",G,v(o(t).errors.email),1)):c("",!0)])]),e("div",null,[e("button",{class:"bg-sky-500 hover:bg-sky-600 disabled:bg-sky-200 inline-flex h-9 w-full justify-center items-center rounded-md border border-transparent text-sm text-slate-50 font-bold",disabled:a.value>0||!d.value},v(o(t).submitted&&a.value>0?`重新發送 ${a.value} 秒`:"送出"),9,J),u.value?(n(),r("div",K,v(u.value),1)):c("",!0),f.status?(n(),r("div",L,v(f.status),1)):c("",!0)])],32)])])])])])])}}},Z=N(O,[["__scopeId","data-v-d81d4e27"]]);export{Z as default};
