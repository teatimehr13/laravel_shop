import"./base-iHJmQtcg.js";/* empty css                     */import{E as N,a as O}from"./el-radio-1sMkJyS3.js";import{E as T}from"./el-overlay-CtzYCaxC.js";import{g as j,E as k}from"./el-progress-Bfxy5kti.js";import{E as A}from"./el-button-CQNoZzvE.js";import"./el-tag-CPuyrTQm.js";import{E as z,a as G}from"./el-select-7TH_FEuU.js";import"./el-scrollbar-BLZesUDu.js";import"./el-popper-CJSoZX_d.js";/* empty css                 */import{a7 as h,r as m,p as H,c as J,w as a,o as K,a as l,d as b,b as M}from"./app-JKzr_vVp.js";import{E as Q,a as W}from"./index-DJdM4qGV.js";import{E as X}from"./index-CcXRvPvX.js";import"./use-form-common-props-CZDNuDUm.js";import"./get-BNOfz7a2.js";import"./isArray-Dxzbedgu.js";import"./index-Cl32T4Tj.js";import"./event-BB_Ol6Sd.js";import"./index-CSTan3Pl.js";import"./vnode-B6PzXlGy.js";import"./icon-MSFJ_NKx.js";import"./refs-Dd4dlhR7.js";import"./index-CL1ggOOL.js";import"./aria-CHApNzmi.js";import"./typescript-Bp3YSIOJ.js";import"./_baseClone-Cky5vQQ9.js";import"./_Uint8Array-CSMkYC73.js";import"./_initCloneObject-32_YsKBG.js";import"./isEqual-ZMkI4w92.js";import"./castArray-Ce6QuK0j.js";import"./index-CM0LdUiu.js";import"./index-Cz3lXVSV.js";import"./index-BLed4XWL.js";const Y=["src"],Pe={__name:"StoreForm",props:{formData:Object,fileList:Array,uploadList:Array},emits:["update:file-list","update:form-data","submit","uploadList"],setup(o,{expose:V,emit:E}){const y=o,v=E;h(y,"uploadList");const u=m([]),f=m([]),s=m("top");m(!1);const c=m(""),g=m(!1),d=m(null),w=()=>new Promise((t,e)=>{d.value?d.value.validate(i=>{i?t(!0):e(!1)}):e(new Error("internalFormRef 未綁定"))}),D=()=>{d.value.clearValidate(["store_type"])},F=H({store_name:[{required:!0,message:"門市名稱為必填項",trigger:"blur"}],store_type:[{required:!0,message:"類型為必選項",trigger:"submit"}],address:[{max:255,message:"地址不能超過 255 個字",trigger:"blur"}],is_enabled:[{required:!0,message:"請選擇顯示或隱藏",trigger:"submit"}],image:[{validator:(t,e,i)=>{if(u.value.length===0)i();else{const n=u.value[0].raw;["image/jpeg","image/png","image/gif"].includes(n.type)?i():i(new Error("圖片格式僅限 jpg/png/gif"))}},trigger:"change"}]});V({formValidate:w,internalFormRef:d});const x=(t,e)=>{u.value=[],v("uploadList",u.value)},U=t=>{c.value=t.url,g.value=!0},R=t=>{u.value=[{name:t.name,url:t.url,uid:t.uid,raw:t.raw}],v("uploadList",u.value)},L=t=>{f.value.clearFiles();const e=t[0];e.uid=j(),f.value.handleStart(e)};return(t,e)=>{const i=X,n=W,p=z,I=G,B=A,C=k,P=T,_=N,S=O,q=Q;return K(),J(q,{model:o.formData,"label-width":"300px",class:"demo-ruleForm",rules:F,ref_key:"internalFormRef",ref:d},{default:a(()=>[l(n,{label:"門市名稱","label-position":s.value,prop:"store_name"},{default:a(()=>[l(i,{modelValue:o.formData.store_name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.formData.store_name=r)},null,8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"類型","label-position":s.value,prop:"store_type"},{default:a(()=>[l(I,{modelValue:o.formData.store_type,"onUpdate:modelValue":e[1]||(e[1]=r=>o.formData.store_type=r),teleported:!1,onChange:D},{default:a(()=>[l(p,{label:"直營",value:0}),l(p,{label:"特約展售",value:1}),l(p,{label:"授權經銷商",value:2})]),_:1},8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"地址","label-position":s.value,prop:"address"},{default:a(()=>[l(i,{modelValue:o.formData.address,"onUpdate:modelValue":e[2]||(e[2]=r=>o.formData.address=r)},null,8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"聯絡電話","label-position":s.value,prop:"contact_number"},{default:a(()=>[l(i,{modelValue:o.formData.contact_number,"onUpdate:modelValue":e[3]||(e[3]=r=>o.formData.contact_number=r)},null,8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"營業時間","label-position":s.value,prop:"opening_hours"},{default:a(()=>[l(i,{modelValue:o.formData.opening_hours,"onUpdate:modelValue":e[4]||(e[4]=r=>o.formData.opening_hours=r),type:"textarea",autosize:{minRows:2,maxRows:6}},null,8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"圖片","label-position":s.value,prop:"image"},{default:a(()=>[l(C,{"file-list":o.fileList,class:"upload-demo",action:"","on-preview":U,"on-remove":x,"list-type":"picture","auto-upload":!1,limit:1,"on-exceed":L,ref_key:"upload",ref:f,"popper-class":"no-transition","on-change":R},{default:a(()=>[l(B,{type:"",style:{width:"100% !important"}},{default:a(()=>e[7]||(e[7]=[b("選擇檔案")])),_:1})]),_:1},8,["file-list"]),l(P,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=r=>g.value=r)},{default:a(()=>[M("img",{"w-full":"",src:c.value,alt:"Preview Image",style:{margin:"auto"}},null,8,Y)]),_:1},8,["modelValue"])]),_:1},8,["label-position"]),l(n,{label:"操作","label-position":s.value,prop:"is_enabled"},{default:a(()=>[l(S,{modelValue:o.formData.is_enabled,"onUpdate:modelValue":e[6]||(e[6]=r=>o.formData.is_enabled=r)},{default:a(()=>[l(_,{value:1},{default:a(()=>e[8]||(e[8]=[b("顯示")])),_:1}),l(_,{value:0},{default:a(()=>e[9]||(e[9]=[b("隱藏")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label-position"]),l(n)]),_:1},8,["model","rules"])}}};export{Pe as default};
