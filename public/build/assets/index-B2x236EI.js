import{C as j,r as W,f as g,y as K,o as m,c as b,w as k,j as x,b as C,n as v,u as a,I as z,q as Y,k as N,t as F,A as J,i as H,N as Q,L as P,e as R,a as q,a8 as X,aU as ee,Y as te,a0 as _,bf as B,aG as A,as as oe,aq as ne,aB as $}from"./app-lsMHx7PK.js";import{j as se}from"./use-form-common-props-D5ONMDRx.js";import{b as ie,d as I,E as D,_ as ae,h as le}from"./base-Brf_yBAJ.js";import{i as re,T as V,C as ce}from"./icon-Domd4CnA.js";import{b as ue,E as w}from"./aria-n-U01RP3.js";const O=["success","info","warning","error"],fe=ie({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:re},id:{type:String,default:""},message:{type:I([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:I(Function),default:()=>{}},onClose:{type:I(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...O,""],default:""},zIndex:Number}),de={destroy:()=>!0},pe=j({name:"ElNotification"}),me=j({...pe,props:fe,emits:de,setup(t,{expose:s}){const o=t,{ns:n,zIndex:r}=ue("notification"),{nextZIndex:d,currentZIndex:c}=r,{Close:u}=ce,l=W(!1);let i;const f=g(()=>{const e=o.type;return e&&V[o.type]?n.m(e):""}),p=g(()=>o.type&&V[o.type]||o.icon),T=g(()=>o.position.endsWith("right")?"right":"left"),U=g(()=>o.position.startsWith("top")?"top":"bottom"),G=g(()=>{var e;return{[U.value]:`${o.offset}px`,zIndex:(e=o.zIndex)!=null?e:c.value}});function S(){o.duration>0&&({stop:i}=ee(()=>{l.value&&h()},o.duration))}function M(){i==null||i()}function h(){l.value=!1}function Z({code:e}){e===w.delete||e===w.backspace?M():e===w.esc?l.value&&h():S()}return K(()=>{S(),d(),l.value=!0}),se(document,"keydown",Z),s({visible:l,close:h}),(e,he)=>(m(),b(X,{name:a(n).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:be=>e.$emit("destroy"),persisted:""},{default:k(()=>[x(C("div",{id:e.id,class:v([a(n).b(),e.customClass,a(T)]),style:z(a(G)),role:"alert",onMouseenter:M,onMouseleave:S,onClick:e.onClick},[a(p)?(m(),b(a(D),{key:0,class:v([a(n).e("icon"),a(f)])},{default:k(()=>[(m(),b(Y(a(p))))]),_:1},8,["class"])):N("v-if",!0),C("div",{class:v(a(n).e("group"))},[C("h2",{class:v(a(n).e("title")),textContent:F(e.title)},null,10,["textContent"]),x(C("div",{class:v(a(n).e("content")),style:z(e.title?void 0:{margin:0})},[J(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),H(Q,{key:1},[N(" Caution here, message could've been compromised, never use user's input as message "),C("p",{innerHTML:e.message},null,8,["innerHTML"])],2112)):(m(),H("p",{key:0},F(e.message),1))])],6),[[P,e.message]]),e.showClose?(m(),b(a(D),{key:0,class:v(a(n).e("closeBtn")),onClick:R(h,["stop"])},{default:k(()=>[q(a(u))]),_:1},8,["class","onClick"])):N("v-if",!0)],2)],46,["id","onClick"]),[[P,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var ve=ae(me,[["__file","notification.vue"]]);const E={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},L=16;let ye=1;const y=function(t={},s){if(!te)return{close:()=>{}};(_(t)||B(t))&&(t={message:t});const o=t.position||"top-right";let n=t.offset||0;E[o].forEach(({vm:f})=>{var p;n+=(((p=f.el)==null?void 0:p.offsetHeight)||0)+L}),n+=L;const r=`notification_${ye++}`,d=t.onClose,c={...t,offset:n,id:r,onClose:()=>{ge(r,o,d)}};let u=document.body;A(t.appendTo)?u=t.appendTo:_(t.appendTo)&&(u=document.querySelector(t.appendTo)),A(u)||(u=document.body);const l=document.createElement("div"),i=q(ve,c,oe(c.message)?c.message:B(c.message)?()=>c.message:null);return i.appContext=ne(s)?y._context:s,i.props.onDestroy=()=>{$(null,l)},$(i,l),E[o].push({vm:i}),u.appendChild(l.firstElementChild),{close:()=>{i.component.exposed.visible.value=!1}}};O.forEach(t=>{y[t]=(s={},o)=>((_(s)||B(s))&&(s={message:s}),y({...s,type:t},o))});function ge(t,s,o){const n=E[s],r=n.findIndex(({vm:i})=>{var f;return((f=i.component)==null?void 0:f.props.id)===t});if(r===-1)return;const{vm:d}=n[r];if(!d)return;o==null||o(d);const c=d.el.offsetHeight,u=s.split("-")[0];n.splice(r,1);const l=n.length;if(!(l<1))for(let i=r;i<l;i++){const{el:f,component:p}=n[i].vm,T=Number.parseInt(f.style[u],10)-c-L;p.props.offset=T}}function Ce(){for(const t of Object.values(E))t.forEach(({vm:s})=>{s.component.exposed.visible.value=!1})}y.closeAll=Ce;y._context=null;const Ie=le(y,"$notify");export{Ie as E};
