import{E as q}from"./base-DdF9LHzb.js";import{E as B}from"./el-button-DNj5ad6N.js";/* empty css                 */import{Q as P,p as F,r as I,h as O,i as p,a as l,b as t,l as L,N as w,O as z,t as a,w as r,n as C,j as f,aT as E,L as N,k as A,o as m,d as g}from"./app-rUP0WFHc.js";import{_ as D}from"./FrontendLayout-CJFzroii.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as X}from"./index-C2tRIJKK.js";import"./aria-CAJK2HN2.js";import"./index-CTujAvOj.js";import"./get-Bq4Kqk5y.js";import"./isArray-Dxzbedgu.js";import"./use-form-common-props-BeLgxl5I.js";import"./index-CR5GapiV.js";import"./icon-HjsV8w-5.js";import"./el-main-dkI-bN8J.js";import"./el-col-CWY6KSpn.js";import"./typescript-Bp3YSIOJ.js";import"./el-avatar-D50oI0pS.js";import"./el-popper-B0TJAX3S.js";import"./index-C9IVSUvu.js";import"./el-scrollbar-D-M4snyz.js";import"./castArray-Ce6QuK0j.js";import"./refs-C5awHzNN.js";import"./event-BB_Ol6Sd.js";import"./index-Dw169JbW.js";import"./index-B2iIRy8e.js";const Q={class:"checkout-container"},R={key:0},G={class:"chk-product"},H={class:"chk-product-img"},J=["src"],K={class:"chk-product-name"},W={class:"chk-price"},Y={class:"chk-qty"},Z={class:"chk-subtotal-price"},tt={class:"checkout-con-layout"},et={class:"chk-remark"},ot={class:"chk-shpInfo"},st={class:"shipInfo-contact"},nt={key:0,class:"buyer-info"},lt={key:1,class:"edit-fields buyer-info"},at={class:"buyer-name"},dt={class:"buyer-phone"},it={class:"buyer-address"},ct={class:"shipInfo-invoice"},ut={style:{display:"flex","justify-content":"flex-end","align-items":"start"}},rt={class:"checkout-con-layout"},pt={class:"payment-sel"},mt={class:"payment-options"},vt={class:"checkmark"},yt={class:"checkmark"},ht={class:"checkout-con-layout",style:{display:"none"}},ft={class:"payment-acc-info-con"},kt={class:"checkout-con-layout",style:{"background-color":"#fafdff"}},_t={class:"total-price-gp"},gt={class:"checkout-subtotal-price"},bt={class:"checkout-ship-fee"},Vt={class:"checkout-total-price"},xt={style:{display:"flex","justify-content":"flex-end",margin:"12px auto"}},St={__name:"Checkout",props:{checkoutItems:{type:Array},user:{type:Object},checkoutSummary:{type:Object}},setup(n){var V,x;const b=(x=(V=P().props)==null?void 0:V.flash)==null?void 0:x.latest_order_number;b&&window.location.replace(route("order.show",{order:b}));const y=n,T=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),k=F({note:"",address:"",name:"",phone:""});function v(o){return!o&&o!==0?"NT$":`NT$${Number(o).toLocaleString("en-US")}`}const d=I("credit_card"),h=I(!1),U={credit_card:2,cash:3};function j(){const o=document.createElement("form");o.method="POST",o.action="/checkout/placeOrder",o.style.display="none";const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=T,o.appendChild(e),u(o,"address",y.user.address),u(o,"name",y.user.name),u(o,"phone",y.user.phone),u(o,"note",k.note),u(o,"order_status",U[d.value]),u(o,"payment_method",d.value),y.checkoutItems.forEach(c=>{u(o,"selected_ids[]",c.productOption.id)}),document.body.appendChild(o),o.submit()}function u(o,e,c){const i=document.createElement("input");i.type="hidden",i.name=e,i.value=c,o.appendChild(i)}return(o,e)=>{const c=X,i=B,S=O("Select"),_=q,$=O("Plus");return m(),p(w,null,[l(D),t("div",Q,[n.checkoutItems.length?(m(),p("div",R,[e[25]||(e[25]=L('<div class="checkout-con-layout" data-v-9e8d5e48><div class="chk-product" data-v-9e8d5e48>訂單商品名稱</div><div class="empty" data-v-9e8d5e48></div><div class="chk-price gray-font" data-v-9e8d5e48>單價</div><div class="chk-qty gray-font" data-v-9e8d5e48>數量</div><div class="chk-subtotal-price gray-font" data-v-9e8d5e48>總價</div></div>',1)),(m(!0),p(w,null,z(n.checkoutItems,(s,Ot)=>(m(),p("div",{class:"checkout-con-layout",key:s.productOption.id},[t("div",G,[t("div",H,[t("img",{src:s.productOption.image,style:{"max-width":"50px"}},null,8,J)]),t("div",K,a(s.product.name)+" ("+a(s.productOption.color_name)+") ",1)]),e[7]||(e[7]=t("div",{class:"empty"},null,-1)),t("div",W,a(v(s.productOption.price)),1),t("div",Y,a(s.quantity),1),t("div",Z,a(v(s.subtotal)),1)]))),128)),t("div",tt,[t("div",et,[l(c,{modelValue:k.note,"onUpdate:modelValue":e[0]||(e[0]=s=>k.note=s),style:{width:"100%"},rows:4,type:"textarea",placeholder:"備註:指定收貨時間 / 管理室代收等 ..."},null,8,["modelValue"])]),t("div",ot,[t("div",st,[t("div",null,[e[10]||(e[10]=t("span",null," 寄送資訊 ",-1)),h.value?(m(),p("div",lt,[e[9]||(e[9]=t("div",null,[t("span",null," 賣家宅配: ")],-1)),t("div",at,[l(c,{modelValue:n.user.name,"onUpdate:modelValue":e[1]||(e[1]=s=>n.user.name=s),placeholder:"姓名"},null,8,["modelValue"])]),t("div",dt,[l(c,{modelValue:n.user.phone,"onUpdate:modelValue":e[2]||(e[2]=s=>n.user.phone=s),placeholder:"電話"},null,8,["modelValue"])]),t("div",it,[l(c,{modelValue:n.user.address,"onUpdate:modelValue":e[3]||(e[3]=s=>n.user.address=s),placeholder:"地址"},null,8,["modelValue"])])])):(m(),p("div",nt,[e[8]||(e[8]=t("div",null,[t("span",null," 賣家宅配: ")],-1)),t("div",null,a(n.user.name),1),t("div",null,a(n.user.phone),1),t("div",null,[t("span",null,a(n.user.address),1)])]))]),t("div",null,[l(i,{type:"primary",link:"",onClick:e[4]||(e[4]=s=>h.value=!h.value)},{default:r(()=>[g(a(h.value?"完成":"變更"),1)]),_:1})])]),e[14]||(e[14]=t("div",{class:"shipInfo-line"},null,-1)),t("div",ct,[e[12]||(e[12]=t("div",{class:"invoice-content1"},[t("span",null,"電子發票")],-1)),e[13]||(e[13]=t("div",{class:"invoice-content2"},[t("span",null," 二聯式發票(個人) "),t("span",null," 手機載具 ")],-1)),t("div",ut,[l(i,{type:"primary",link:""},{default:r(()=>e[11]||(e[11]=[g(" 變更 ")])),_:1})])])])]),t("div",rt,[e[17]||(e[17]=t("div",{class:"payment-text"},[t("span",null,"付款方式")],-1)),t("div",pt,[t("div",mt,[t("label",{class:C(["payment-btn",{active:d.value==="cash"}]),style:{display:"none"}},[f(t("input",{type:"radio",name:"payment",value:"cash","onUpdate:modelValue":e[5]||(e[5]=s=>d.value=s)},null,512),[[E,d.value]]),e[15]||(e[15]=t("span",null,"貨到付款",-1)),f(t("i",vt,[l(_,null,{default:r(()=>[l(S)]),_:1})],512),[[N,d.value==="cash"]])],2),t("label",{class:C(["payment-btn",{active:d.value==="credit_card"}])},[f(t("input",{type:"radio",name:"payment",value:"credit_card","onUpdate:modelValue":e[6]||(e[6]=s=>d.value=s)},null,512),[[E,d.value]]),e[16]||(e[16]=t("span",null,"信用卡/金融卡",-1)),f(t("i",yt,[l(_,null,{default:r(()=>[l(S)]),_:1})],512),[[N,d.value==="credit_card"]])],2)])])]),t("div",ht,[e[20]||(e[20]=t("div",{class:"payment-acc"},[t("span",null,"選擇付款帳戶")],-1)),t("div",ft,[e[19]||(e[19]=t("div",null,[t("div",{class:"payment-acc-info"},[t("img",{src:"https://spm.susercontent.com/api/v4/50092786/shopee_logo_bucket/static/images/credit_card_icon_visa@3x.png",alt:""})]),t("div",{class:"payment-acc-info2"},[t("div",null,[t("span",null,"XX國際商業銀行"),t("span",null,"**** 1234")])])],-1)),t("div",null,[l(i,{plain:""},{default:r(()=>[l(_,null,{default:r(()=>[l($)]),_:1}),e[18]||(e[18]=t("span",null,"新增信用卡付款",-1))]),_:1})])])]),t("div",kt,[t("div",_t,[t("div",gt,[e[21]||(e[21]=t("span",{class:"gray-font"}," 商品總金額 ",-1)),t("span",null,a(v(n.checkoutSummary.subtotal)),1)]),t("div",bt,[e[22]||(e[22]=t("span",{class:"gray-font"}," 運費總金額 ",-1)),t("span",null,a(v(n.checkoutSummary.shippingFee)),1)]),t("div",Vt,[e[23]||(e[23]=t("span",{class:"gray-font"}," 總付款金額 ",-1)),t("span",null,a(v(n.checkoutSummary.total)),1)])])]),t("div",xt,[l(i,{color:"#f56c6c",style:{color:"white","font-weight":"bold"},size:"large",onClick:j},{default:r(()=>e[24]||(e[24]=[g("下訂單")])),_:1})])])):A("",!0)])],64)}}},Zt=M(St,[["__scopeId","data-v-9e8d5e48"]]);export{Zt as default};
