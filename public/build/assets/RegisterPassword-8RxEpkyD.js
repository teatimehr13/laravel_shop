import{E as R}from"./base-iHJmQtcg.js";/* empty css                     *//* empty css                 */import{Q as S,T as q,r as u,p as B,c,w as a,o as f,b as e,a as s,u as o,q as v,s as x,x as h,F as I}from"./app-JKzr_vVp.js";import D from"./RegisterLayout-B6S9lRBb.js";import{E as N}from"./index-CcXRvPvX.js";import{a as U,E as j}from"./index-DJdM4qGV.js";import"./RegisterLayout.vue_vue_type_style_index_0_lang-D7QsxWgP.js";import"./event-BB_Ol6Sd.js";import"./index-CKck6qGF.js";import"./vnode-B6PzXlGy.js";import"./icon-MSFJ_NKx.js";import"./HelloAnimation-CEXemSgO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-common-props-CZDNuDUm.js";import"./get-BNOfz7a2.js";import"./isArray-Dxzbedgu.js";import"./index-Cl32T4Tj.js";import"./typescript-Bp3YSIOJ.js";import"./index-CSTan3Pl.js";import"./index-BLed4XWL.js";import"./index-CM0LdUiu.js";import"./castArray-Ce6QuK0j.js";import"./_baseClone-Cky5vQQ9.js";import"./_Uint8Array-CSMkYC73.js";import"./_initCloneObject-32_YsKBG.js";const z={class:"border-card border divide-y rounded-md"},Q={class:"px-6 py-4"},T={class:"mb-8"},$={class:"block mb-2"},A={class:"block"},wo={__name:"RegisterPassword",setup(G){const _=S().props.register||{},r=q({password:_.password||"",password_confirmation:_.password||""}),y=async()=>{await F()&&await E()},E=()=>{r.post(route("register.post.password"),{onSuccess:()=>I.visit(route("register.info")),onError:d=>{}})},g=(d,t,n)=>r.password!==r.password_confirmation?n(new Error("密碼與再次輸入密碼不同")):!0,i=u(!1),l=u(!1),V=()=>i.value=!i.value,k=()=>l.value=!l.value,m=u(),C=B({password:[{required:!0,message:"密碼未填寫",trigger:"submit"},{min:8,message:"密碼至少8位",trigger:"submit"},{pattern:/[a-z]/,message:"需含小寫字母",trigger:"submit"},{pattern:/[0-9]/,message:"需含數字",trigger:"submit"},{validator:g,trigger:"submit"}],password_confirmation:[{required:!0,message:"密碼未填寫",trigger:"submit"},{validator:g,trigger:"submit"}]}),F=async()=>{if(m.value)try{return await m.value.validate(),!0}catch{return!1}};return(d,t)=>{const n=N,w=R,b=U,P=j;return f(),c(D,null,{form:a(()=>[e("div",z,[t[2]||(t[2]=e("div",{class:"px-6 py-3"},[e("h1",{class:"text-strong font-medium text-2xl font-bold"}," 密碼設定 ")],-1)),e("div",Q,[s(P,{model:o(r),class:"demo-ruleForm",rules:C,ref_key:"internalFormRef",ref:m},{default:a(()=>[e("div",T,[e("label",$,[s(b,{label:"",prop:"password",class:"relative w-full",error:o(r).errors.password},{default:a(()=>[s(n,{modelValue:o(r).password,"onUpdate:modelValue":t[0]||(t[0]=p=>o(r).password=p),placeholder:"請輸入密碼",type:i.value?"text":"password"},null,8,["modelValue","type"]),s(w,{onClick:V,class:"cursor-pointer",style:{position:"absolute",top:"0",bottom:"0",margin:"auto",right:"10px"}},{default:a(()=>[(f(),c(v(i.value?o(x):o(h))))]),_:1})]),_:1},8,["error"])]),e("label",A,[s(b,{label:"",prop:"password_confirmation",class:"relative w-full",error:o(r).errors.password},{default:a(()=>[s(n,{modelValue:o(r).password_confirmation,"onUpdate:modelValue":t[1]||(t[1]=p=>o(r).password_confirmation=p),placeholder:"請再次輸入密碼",type:l.value?"text":"password"},null,8,["modelValue","type"]),s(w,{onClick:k,class:"cursor-pointer",style:{position:"absolute",top:"0",bottom:"0",margin:"auto",right:"10px"}},{default:a(()=>[(f(),c(v(l.value?o(x):o(h))))]),_:1})]),_:1},8,["error"])])])]),_:1},8,["model","rules"]),e("div",null,[e("button",{onClick:y,class:"text-white bg-indigo-400 inline-flex h-8 w-full justify-center items-center rounded-md border border-indigo-300 text-sm font-bold hover:bg-indigo-500 hover:border-indigo-500"}," 下一步 ")])])])]),_:1})}}};export{wo as default};
