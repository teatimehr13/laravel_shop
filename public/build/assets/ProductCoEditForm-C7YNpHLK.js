import{E as X}from"./base-DdF9LHzb.js";import{E as Y}from"./el-overlay-BtrBO0B-.js";/* empty css                     */import{E as ee,a as oe}from"./el-table-column-BUbEU7oj.js";import"./el-checkbox-XIduAFHh.js";import"./el-tooltip-l0sNRNKZ.js";import{E as te}from"./el-popper-B0TJAX3S.js";import"./el-scrollbar-D-M4snyz.js";import{E as le}from"./el-popover-CzPz6YOE.js";import{E as ie}from"./el-button-DNj5ad6N.js";import{E as ne,a as ae}from"./el-radio-D-SFzlxi.js";import{E as re}from"./el-color-picker-ya9FAh8A.js";/* empty css                 */import"./el-tag-Ch_t78t2.js";import{f as D,r as _,p as se,h as V,i as m,a as o,w as t,N as me,o as a,t as k,c as w,b as d,I as de,k as N,d as f,j as T,L as B}from"./app-rUP0WFHc.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as ue,a as fe}from"./index-CrKXfINh.js";import{E as pe}from"./index-C2tRIJKK.js";import"./vnode-C-uRYfLb.js";import"./icon-HjsV8w-5.js";import"./refs-C5awHzNN.js";import"./index-CTujAvOj.js";import"./get-Bq4Kqk5y.js";import"./isArray-Dxzbedgu.js";import"./event-BB_Ol6Sd.js";import"./aria-CAJK2HN2.js";import"./use-form-common-props-BeLgxl5I.js";import"./index-CR5GapiV.js";import"./_Uint8Array-CHYqkzCa.js";import"./index-C9IVSUvu.js";import"./_initCloneObject-DgXXankK.js";import"./isEqual-nt7ctgGs.js";import"./index-CzXl0CR-.js";import"./index-B2iIRy8e.js";import"./castArray-Ce6QuK0j.js";import"./_baseClone-DZbmGIMq.js";import"./typescript-Bp3YSIOJ.js";import"./index-Dw169JbW.js";const ge={key:0},_e={key:0},we={key:0,class:"color-cube-outner"},ve={class:"color-cube"},be={class:"demonstration"},ke={key:0},Re={key:0},ye={key:0},Ce=["src","onClick"],Ee={key:1,class:"icon_gp"},Ve={key:0,class:"custom-file-wrapper"},he=["src"],Fe={class:"file-actions"},Le={key:1,class:"custom-file-wrapper"},Ie=["src"],Ue={class:"file-actions"},$e=["src"],Pe={__name:"ProductCoEditForm",props:{color_options_data:Object,fileList_co:Array,tempRow:Object,editingRow:Number},emits:["update:fileList_co","update:tempRow","toggle-edit","cancel-edit","del-co"],setup(i,{expose:j,emit:q}){const h=i,S=D(()=>[...h.color_options_data].sort((r,e)=>r.color_code==="combo"?1:e.color_code==="combo"?-1:0)),R=_(""),v=_(!1),A=se({color_name:[{required:!0,message:"顏色名稱為必填項",trigger:"blur"}],color_code:[{required:!0,message:"顏色為必填項",trigger:"blur"}],price:[{required:!0,message:"價格為必填項",trigger:"blur"},{type:"number",message:"需為數字類型",trigger:"blur"}],enable:[{required:!0,message:"請選擇顯示或隱藏",trigger:"submit"}],image:[{validator:(r,e,s)=>{if(fileList_co.value.length===0)s();else{const p=fileList_co.value[0];["image/jpeg","image/png","image/gif"].includes(p.type)?s():s(new Error("圖片格式僅限 jpg/png/gif"))}},trigger:"change"}]}),b=_(),O=r=>{R.value=r,v.value=!0},F=r=>{v.value=!0,R.value=r.url},Z=r=>{const e=r.target.files[0];if(e){const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{C("update:fileList_co",[{name:e.name,url:s.result,file:e}])}}},L=r=>{C("update:fileList_co",[]),C("update:tempRow",{...h.tempRow,image:""})},y=()=>{I.value.click()},I=_(null);j({colorFormRef:b,colorFormValidate:()=>new Promise((r,e)=>{b.value?b.value.validate(s=>{s?r(!0):e(!1)}):e(new Error("colorFormRef 未綁定"))})});const C=q,U=_({});return D(()=>tempRow.value.color_code==="combo"?["rgba(255, 255, 255, 0)"]:["#ff0000","#00ff00","#0000ff"]),(r,e)=>{const s=pe,p=fe,c=ee,G=re,$=te,P=ne,M=ae,x=V("ZoomIn"),u=X,z=V("Delete"),E=V("Plus"),g=ie,H=le,J=oe,K=ue,Q=Y;return a(),m(me,null,[o(K,{model:i.tempRow,rules:A,ref_key:"colorFormRef",ref:b,class:"colorForm"},{default:t(()=>[o(J,{data:S.value},{default:t(()=>[o(c,{label:"顏色名稱",width:"130"},{default:t(l=>[i.editingRow!==l.row.id?(a(),m("div",ge,k(l.row.color_name),1)):(a(),w(p,{key:1,prop:"color_name"},{default:t(()=>[o(s,{modelValue:i.tempRow.color_name,"onUpdate:modelValue":e[0]||(e[0]=n=>i.tempRow.color_name=n),placeholder:"輸入顏色",size:"small"},null,8,["modelValue"])]),_:1}))]),_:1}),o(c,{label:"顏色",width:"130"},{default:t(l=>[i.editingRow!==l.row.id?(a(),m("div",_e,[l.row.color_code!=="combo"?(a(),m("div",we,[d("span",ve,[d("span",{class:"color-cube-inner",style:de({backgroundColor:l.row.color_code})},null,4)])])):N("",!0)])):(a(),w(p,{key:1,prop:"color_code"},{default:t(()=>[l.row.color_code!=="combo"?(a(),w($,{key:0,class:"box-item",effect:"dark",content:"選取產品顏色",placement:"top"},{default:t(()=>[d("span",be,[o(G,{modelValue:i.tempRow.color_code,"onUpdate:modelValue":e[1]||(e[1]=n=>i.tempRow.color_code=n)},null,8,["modelValue"])])]),_:1})):N("",!0)]),_:2},1024))]),_:1}),o(c,{label:"價格",width:"130"},{default:t(l=>[i.editingRow!==l.row.id?(a(),m("div",ke,k(l.row.price),1)):(a(),w(p,{key:1,prop:"price"},{default:t(()=>[o(s,{modelValue:i.tempRow.price,"onUpdate:modelValue":e[2]||(e[2]=n=>i.tempRow.price=n),modelModifiers:{number:!0},placeholder:"輸入價格",size:"small"},null,8,["modelValue"])]),_:1}))]),_:1}),o(c,{label:"顯示選項",width:"200"},{default:t(l=>[i.editingRow!==l.row.id?(a(),m("div",Re,k(l.row.enable=="1"?"顯示":"隱藏"),1)):(a(),w(p,{key:1,prop:"enable"},{default:t(()=>[o(M,{modelValue:i.tempRow.enable,"onUpdate:modelValue":e[3]||(e[3]=n=>i.tempRow.enable=n)},{default:t(()=>[o(P,{value:1},{default:t(()=>e[9]||(e[9]=[f("顯示")])),_:1}),o(P,{value:0},{default:t(()=>e[10]||(e[10]=[f("隱藏")])),_:1})]),_:1},8,["modelValue"])]),_:1}))]),_:1}),o(c,{label:"圖片"},{default:t(l=>[i.editingRow!==l.row.id?(a(),m("div",ye,[d("img",{src:l.row.image,width:"50px",onClick:n=>O(l.row.image)},null,8,Ce)])):(a(),m("div",Ee,[d("input",{ref_key:"fileInput",ref:I,type:"file",class:"hidden-input",onChange:Z},null,544),i.fileList_co.length>0?(a(),m("div",Ve,[d("img",{src:i.fileList_co[0].url,class:"upload-img"},null,8,he),d("div",Fe,[o(u,{class:"action-icon",onClick:e[4]||(e[4]=n=>F(i.fileList_co[0]))},{default:t(()=>[o(x)]),_:1}),o(u,{class:"action-icon",onClick:e[5]||(e[5]=n=>L(i.fileList_co[0]))},{default:t(()=>[o(z)]),_:1}),o(u,{class:"action-icon plus-icon",onClick:y},{default:t(()=>[o(E)]),_:1})])])):i.tempRow.image?(a(),m("div",Le,[d("img",{src:i.tempRow.image,class:"upload-img"},null,8,Ie),d("div",Ue,[o(u,{class:"action-icon",onClick:e[6]||(e[6]=n=>F({url:i.tempRow.image}))},{default:t(()=>[o(x)]),_:1}),o(u,{class:"action-icon",onClick:L},{default:t(()=>[o(z)]),_:1}),o(u,{class:"action-icon plus-icon",onClick:y},{default:t(()=>[o(E)]),_:1})])])):(a(),m("div",{key:2,class:"upload-placeholder",onClick:y},[o($,{class:"box-item",effect:"dark",content:"上傳檔案",placement:"top-start"},{default:t(()=>[o(g,null,{default:t(()=>[o(u,null,{default:t(()=>[o(E)]),_:1})]),_:1})]),_:1})]))]))]),_:1}),o(c,{label:"操作",width:"250px"},{default:t(l=>[o(g,{type:i.editingRow===l.row.id?"primary":"",size:"small",onClick:n=>r.$emit("toggle-edit",l.row)},{default:t(()=>[f(k(i.editingRow===l.row.id?"儲存":"編輯"),1)]),_:2},1032,["type","onClick"]),T(o(g,{size:"small",onClick:e[7]||(e[7]=n=>r.$emit("cancel-edit"))},{default:t(()=>e[11]||(e[11]=[f(" 取消 ")])),_:2},1536),[[B,i.editingRow===l.row.id]]),o(H,{title:"確定移除此筆資料?",onConfirm:n=>r.$emit("del-co",l.row.id),width:170,"hide-after":100,visible:U.value[l.row.id],"onUpdate:visible":n=>U.value[l.row.id]=n},{reference:t(()=>[T(o(g,{size:"small",type:"danger"},{default:t(()=>e[12]||(e[12]=[f("移除")])),_:2},1536),[[B,i.editingRow!==l.row.id]])]),actions:t(({confirm:n,cancel:W})=>[o(g,{size:"small",onClick:W},{default:t(()=>e[13]||(e[13]=[f("沒有")])),_:2},1032,["onClick"]),o(g,{type:"danger",size:"small",onClick:n},{default:t(()=>e[14]||(e[14]=[f(" 是 ")])),_:2},1032,["onClick"])]),_:2},1032,["onConfirm","visible","onUpdate:visible"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"]),o(Q,{modelValue:v.value,"onUpdate:modelValue":e[8]||(e[8]=l=>v.value=l),style:{width:"max-content"}},{default:t(()=>[d("img",{"w-full":"",src:R.value,alt:"Preview Image"},null,8,$e)]),_:1},8,["modelValue"])],64)}}},bo=ce(Pe,[["__scopeId","data-v-3feb015d"]]);export{bo as default};
