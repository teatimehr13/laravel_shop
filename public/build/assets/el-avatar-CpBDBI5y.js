import{B as ge,C as K,r as y,f as w,a0 as Ke,R as be,g as te,o as S,i as H,I as ee,u as E,c as A,w as _,q as _e,A as k,n as W,D as J,G as T,y as De,H as Ee,br as Me,a7 as j,h,a as N,bu as Ae,bv as Ge,a5 as ze,aR as Ye,a4 as Q,k as oe,E as Ie,X as Ue,b as He,e as ne,N as Je}from"./app-lsMHx7PK.js";import{b as q,d as R,u as Z,E as re,_ as D,w as we,a as he}from"./base-Brf_yBAJ.js";import{e as Ve,j as je,a as We}from"./use-form-common-props-D5ONMDRx.js";import{i as ye}from"./icon-Domd4CnA.js";import{E as Ce}from"./el-button-DwHekHmB.js";import{e as L,b as qe,u as pe,E as Xe,O as Qe,w as fe,F as Ze}from"./el-popper-BSwFi-Wn.js";import{E as xe}from"./el-scrollbar-CorRZexq.js";import{E as $}from"./aria-n-U01RP3.js";import{u as eo}from"./index-VxK2knAE.js";import{u as Te}from"./index-6SUpneNt.js";import{c as oo}from"./castArray-Ce6QuK0j.js";import{c as $e}from"./refs-DiFgKJQR.js";const no=q({size:{type:[Number,String],values:Ve,default:"",validator:e=>ge(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:ye},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:R(String),default:"cover"}}),to={error:e=>e instanceof Event},ro=K({name:"ElAvatar"}),lo=K({...ro,props:no,emits:to,setup(e,{emit:n}){const s=e,o=Z("avatar"),i=y(!1),c=w(()=>{const{size:r,icon:m,shape:f}=s,g=[o.b()];return Ke(r)&&g.push(o.m(r)),m&&g.push(o.m("icon")),f&&g.push(o.m(f)),g}),d=w(()=>{const{size:r}=s;return ge(r)?o.cssVarBlock({size:be(r)||""}):void 0}),a=w(()=>({objectFit:s.fit}));te(()=>s.src,()=>i.value=!1);function p(r){i.value=!0,n("error",r)}return(r,m)=>(S(),H("span",{class:W(E(c)),style:ee(E(d))},[(r.src||r.srcSet)&&!i.value?(S(),H("img",{key:0,src:r.src,alt:r.alt,srcset:r.srcSet,style:ee(E(a)),onError:p},null,44,["src","alt","srcset"])):r.icon?(S(),A(E(re),{key:1},{default:_(()=>[(S(),A(_e(r.icon)))]),_:1})):k(r.$slots,"default",{key:2})],6))}});var so=D(lo,[["__file","avatar.vue"]]);const pn=we(so),ao=K({inheritAttrs:!1});function io(e,n,s,o,i,c){return k(e.$slots,"default")}var co=D(ao,[["render",io],["__file","collection.vue"]]);const uo=K({name:"ElCollectionItem",inheritAttrs:!1});function po(e,n,s,o,i,c){return k(e.$slots,"default")}var fo=D(uo,[["render",po],["__file","collection-item.vue"]]);const Se="data-el-collection-item",Oe=e=>{const n=`El${e}Collection`,s=`${n}Item`,o=Symbol(n),i=Symbol(s),c={...co,name:n,setup(){const a=y(null),p=new Map;J(o,{itemMap:p,getItems:()=>{const m=E(a);if(!m)return[];const f=Array.from(m.querySelectorAll(`[${Se}]`));return[...p.values()].sort((t,u)=>f.indexOf(t.ref)-f.indexOf(u.ref))},collectionRef:a})}},d={...fo,name:s,setup(a,{attrs:p}){const r=y(null),m=T(o,void 0);J(i,{collectionItemRef:r}),De(()=>{const f=E(r);f&&m.itemMap.set(f,{ref:f,...p})}),Ee(()=>{const f=E(r);m.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:o,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:c,ElCollectionItem:d}},mo=q({style:{type:R([String,Array,Object])},currentTabId:{type:R(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:R(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:vo,ElCollectionItem:go,COLLECTION_INJECTION_KEY:le,COLLECTION_ITEM_INJECTION_KEY:bo}=Oe("RovingFocusGroup"),se=Symbol("elRovingFocusGroup"),Fe=Symbol("elRovingFocusGroupItem"),_o={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Eo=(e,n)=>e,Io=(e,n,s)=>{const o=Eo(e.code);return _o[o]},wo=(e,n)=>e.map((s,o)=>e[(o+n)%e.length]),ae=e=>{const{activeElement:n}=document;for(const s of e)if(s===n||(s.focus(),n!==document.activeElement))return},me="currentTabIdChange",ve="rovingFocusGroup.entryFocus",ho={bubbles:!1,cancelable:!0},yo=K({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:mo,emits:[me,"entryFocus"],setup(e,{emit:n}){var s;const o=y((s=e.currentTabId||e.defaultCurrentTabId)!=null?s:null),i=y(!1),c=y(!1),d=y(null),{getItems:a}=T(le,void 0),p=w(()=>[{outline:"none"},e.style]),r=v=>{n(me,v)},m=()=>{i.value=!0},f=L(v=>{var b;(b=e.onMousedown)==null||b.call(e,v)},()=>{c.value=!0}),g=L(v=>{var b;(b=e.onFocus)==null||b.call(e,v)},v=>{const b=!E(c),{target:M,currentTarget:O}=v;if(M===O&&b&&!E(i)){const G=new Event(ve,ho);if(O==null||O.dispatchEvent(G),!G.defaultPrevented){const I=a().filter(F=>F.focusable),P=I.find(F=>F.active),C=I.find(F=>F.id===E(o)),Y=[P,C,...I].filter(Boolean).map(F=>F.ref);ae(Y)}}c.value=!1}),t=L(v=>{var b;(b=e.onBlur)==null||b.call(e,v)},()=>{i.value=!1}),u=(...v)=>{n("entryFocus",...v)};J(se,{currentTabbedId:Me(o),loop:j(e,"loop"),tabIndex:w(()=>E(i)?-1:0),rovingFocusGroupRef:d,rovingFocusGroupRootStyle:p,orientation:j(e,"orientation"),dir:j(e,"dir"),onItemFocus:r,onItemShiftTab:m,onBlur:t,onFocus:g,onMousedown:f}),te(()=>e.currentTabId,v=>{o.value=v??null}),je(d,ve,u)}});function Co(e,n,s,o,i,c){return k(e.$slots,"default")}var To=D(yo,[["render",Co],["__file","roving-focus-group-impl.vue"]]);const $o=K({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:vo,ElRovingFocusGroupImpl:To}});function So(e,n,s,o,i,c){const d=h("el-roving-focus-group-impl"),a=h("el-focus-group-collection");return S(),A(a,null,{default:_(()=>[N(d,Ae(Ge(e.$attrs)),{default:_(()=>[k(e.$slots,"default")]),_:3},16)]),_:3})}var Oo=D($o,[["render",So],["__file","roving-focus-group.vue"]]);const Fo=q({trigger:qe.trigger,triggerKeys:{type:R(Array),default:()=>[$.enter,$.numpadEnter,$.space,$.down]},effect:{...pe.effect,default:"light"},type:{type:R(String)},placement:{type:R(String),default:"bottom"},popperOptions:{type:R(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:R([Number,String]),default:0},maxHeight:{type:R([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:R(Object)},teleported:pe.teleported}),Ne=q({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ye}}),No=q({onKeydown:{type:R(Function)}}),Ro=[$.down,$.pageDown,$.home],Re=[$.up,$.pageUp,$.end],ko=[...Ro,...Re],{ElCollection:Po,ElCollectionItem:Bo,COLLECTION_INJECTION_KEY:Lo,COLLECTION_ITEM_INJECTION_KEY:Ko}=Oe("Dropdown"),x=Symbol("elDropdown"),{ButtonGroup:Do}=Ce,Mo=K({name:"ElDropdown",components:{ElButton:Ce,ElButtonGroup:Do,ElScrollbar:xe,ElDropdownCollection:Po,ElTooltip:Xe,ElRovingFocusGroup:Oo,ElOnlyChild:Qe,ElIcon:re,ArrowDown:ze},props:Fo,emits:["visible-change","click","command"],setup(e,{emit:n}){const s=Ie(),o=Z("dropdown"),{t:i}=eo(),c=y(),d=y(),a=y(null),p=y(null),r=y(null),m=y(null),f=y(!1),g=w(()=>({maxHeight:be(e.maxHeight)})),t=w(()=>[o.m(I.value)]),u=w(()=>oo(e.trigger)),v=Te().value,b=w(()=>e.id||v);te([c,u],([l,B],[U])=>{var ce,de,ue;(ce=U==null?void 0:U.$el)!=null&&ce.removeEventListener&&U.$el.removeEventListener("pointerenter",C),(de=l==null?void 0:l.$el)!=null&&de.removeEventListener&&l.$el.removeEventListener("pointerenter",C),(ue=l==null?void 0:l.$el)!=null&&ue.addEventListener&&B.includes("hover")&&l.$el.addEventListener("pointerenter",C)},{immediate:!0}),Ee(()=>{var l,B;(B=(l=c.value)==null?void 0:l.$el)!=null&&B.removeEventListener&&c.value.$el.removeEventListener("pointerenter",C)});function M(){O()}function O(){var l;(l=a.value)==null||l.onClose()}function G(){var l;(l=a.value)==null||l.onOpen()}const I=We();function P(...l){n("command",...l)}function C(){var l,B;(B=(l=c.value)==null?void 0:l.$el)==null||B.focus()}function z(){}function Y(){const l=E(p);u.value.includes("hover")&&(l==null||l.focus()),m.value=null}function F(l){m.value=l}function ie(l){f.value||(l.preventDefault(),l.stopImmediatePropagation())}function X(){n("visible-change",!0)}function V(l){(l==null?void 0:l.type)==="keydown"&&p.value.focus()}function Le(){n("visible-change",!1)}return J(x,{contentRef:p,role:w(()=>e.role),triggerId:b,isUsingKeyboard:f,onItemEnter:z,onItemLeave:Y}),J("elDropdown",{instance:s,dropdownSize:I,handleClick:M,commandHandler:P,trigger:j(e,"trigger"),hideOnClick:j(e,"hideOnClick")}),{t:i,ns:o,scrollbar:r,wrapStyle:g,dropdownTriggerKls:t,dropdownSize:I,triggerId:b,currentTabId:m,handleCurrentTabIdChange:F,handlerMainButtonClick:l=>{n("click",l)},handleEntryFocus:ie,handleClose:O,handleOpen:G,handleBeforeShowTooltip:X,handleShowTooltip:V,handleBeforeHideTooltip:Le,onFocusAfterTrapped:l=>{var B,U;l.preventDefault(),(U=(B=p.value)==null?void 0:B.focus)==null||U.call(B,{preventScroll:!0})},popperRef:a,contentRef:p,triggeringElementRef:c,referenceElementRef:d}}});function Ao(e,n,s,o,i,c){var d;const a=h("el-dropdown-collection"),p=h("el-roving-focus-group"),r=h("el-scrollbar"),m=h("el-only-child"),f=h("el-tooltip"),g=h("el-button"),t=h("arrow-down"),u=h("el-icon"),v=h("el-button-group");return S(),H("div",{class:W([e.ns.b(),e.ns.is("disabled",e.disabled)])},[N(f,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(d=e.referenceElementRef)==null?void 0:d.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Ye({content:_(()=>[N(r,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:_(()=>[N(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:_(()=>[N(a,null,{default:_(()=>[k(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:_(()=>[N(m,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:_(()=>[k(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(S(),A(v,{key:0},{default:_(()=>[N(g,Q({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:_(()=>[k(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),N(g,Q({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:_(()=>[N(u,{class:W(e.ns.e("icon"))},{default:_(()=>[N(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):oe("v-if",!0)],2)}var Go=D(Mo,[["render",Ao],["__file","dropdown.vue"]]);const zo=K({components:{ElRovingFocusCollectionItem:go},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:s,loop:o,onItemFocus:i,onItemShiftTab:c}=T(se,void 0),{getItems:d}=T(le,void 0),a=Te(),p=y(null),r=L(t=>{n("mousedown",t)},t=>{e.focusable?i(E(a)):t.preventDefault()}),m=L(t=>{n("focus",t)},()=>{i(E(a))}),f=L(t=>{n("keydown",t)},t=>{const{code:u,shiftKey:v,target:b,currentTarget:M}=t;if(u===$.tab&&v){c();return}if(b!==M)return;const O=Io(t);if(O){t.preventDefault();let I=d().filter(P=>P.focusable).map(P=>P.ref);switch(O){case"last":{I.reverse();break}case"prev":case"next":{O==="prev"&&I.reverse();const P=I.indexOf(M);I=o.value?wo(I,P+1):I.slice(P+1);break}}Ue(()=>{ae(I)})}}),g=w(()=>s.value===E(a));return J(Fe,{rovingFocusGroupItemRef:p,tabIndex:w(()=>E(g)?0:-1),handleMousedown:r,handleFocus:m,handleKeydown:f}),{id:a,handleKeydown:f,handleFocus:m,handleMousedown:r}}});function Yo(e,n,s,o,i,c){const d=h("el-roving-focus-collection-item");return S(),A(d,{id:e.id,focusable:e.focusable,active:e.active},{default:_(()=>[k(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Uo=D(zo,[["render",Yo],["__file","roving-focus-item.vue"]]);const Ho=K({name:"DropdownItemImpl",components:{ElIcon:re},props:Ne,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const s=Z("dropdown"),{role:o}=T(x,void 0),{collectionItemRef:i}=T(Ko,void 0),{collectionItemRef:c}=T(bo,void 0),{rovingFocusGroupItemRef:d,tabIndex:a,handleFocus:p,handleKeydown:r,handleMousedown:m}=T(Fe,void 0),f=$e(i,c,d),g=w(()=>o.value==="menu"?"menuitem":o.value==="navigation"?"link":"button"),t=L(u=>{if([$.enter,$.numpadEnter,$.space].includes(u.code))return u.preventDefault(),u.stopImmediatePropagation(),n("clickimpl",u),!0},r);return{ns:s,itemRef:f,dataset:{[Se]:""},role:g,tabIndex:a,handleFocus:p,handleKeydown:t,handleMousedown:m}}});function Jo(e,n,s,o,i,c){const d=h("el-icon");return S(),H(Je,null,[e.divided?(S(),H("li",{key:0,role:"separator",class:W(e.ns.bem("menu","item","divided"))},null,2)):oe("v-if",!0),He("li",Q({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:a=>e.$emit("clickimpl",a),onFocus:e.handleFocus,onKeydown:ne(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:a=>e.$emit("pointermove",a),onPointerleave:a=>e.$emit("pointerleave",a)}),[e.icon?(S(),A(d,{key:0},{default:_(()=>[(S(),A(_e(e.icon)))]),_:1})):oe("v-if",!0),k(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Vo=D(Ho,[["render",Jo],["__file","dropdown-item-impl.vue"]]);const ke=()=>{const e=T("elDropdown",{}),n=w(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},jo=K({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Bo,ElRovingFocusItem:Uo,ElDropdownItemImpl:Vo},inheritAttrs:!1,props:Ne,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:s}){const{elDropdown:o}=ke(),i=Ie(),c=y(null),d=w(()=>{var t,u;return(u=(t=E(c))==null?void 0:t.textContent)!=null?u:""}),{onItemEnter:a,onItemLeave:p}=T(x,void 0),r=L(t=>(n("pointermove",t),t.defaultPrevented),fe(t=>{if(e.disabled){p(t);return}const u=t.currentTarget;u===document.activeElement||u.contains(document.activeElement)||(a(t),t.defaultPrevented||u==null||u.focus())})),m=L(t=>(n("pointerleave",t),t.defaultPrevented),fe(p)),f=L(t=>{if(!e.disabled)return n("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var u,v,b;if(e.disabled){t.stopImmediatePropagation();return}(u=o==null?void 0:o.hideOnClick)!=null&&u.value&&((v=o.handleClick)==null||v.call(o)),(b=o.commandHandler)==null||b.call(o,e.command,i,t)}),g=w(()=>({...e,...s}));return{handleClick:f,handlePointerMove:r,handlePointerLeave:m,textContent:d,propsAndAttrs:g}}});function Wo(e,n,s,o,i,c){var d;const a=h("el-dropdown-item-impl"),p=h("el-roving-focus-item"),r=h("el-dropdown-collection-item");return S(),A(r,{disabled:e.disabled,"text-value":(d=e.textValue)!=null?d:e.textContent},{default:_(()=>[N(p,{focusable:!e.disabled},{default:_(()=>[N(a,Q(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:_(()=>[k(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Pe=D(jo,[["render",Wo],["__file","dropdown-item.vue"]]);const qo=K({name:"ElDropdownMenu",props:No,setup(e){const n=Z("dropdown"),{_elDropdownSize:s}=ke(),o=s.value,{focusTrapRef:i,onKeydown:c}=T(Ze,void 0),{contentRef:d,role:a,triggerId:p}=T(x,void 0),{collectionRef:r,getItems:m}=T(Lo,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:g,tabIndex:t,onBlur:u,onFocus:v,onMousedown:b}=T(se,void 0),{collectionRef:M}=T(le,void 0),O=w(()=>[n.b("menu"),n.bm("menu",o==null?void 0:o.value)]),G=$e(d,r,i,f,M),I=L(C=>{var z;(z=e.onKeydown)==null||z.call(e,C)},C=>{const{currentTarget:z,code:Y,target:F}=C;if(z.contains(F),$.tab===Y&&C.stopImmediatePropagation(),C.preventDefault(),F!==E(d)||!ko.includes(Y))return;const X=m().filter(V=>!V.disabled).map(V=>V.ref);Re.includes(Y)&&X.reverse(),ae(X)});return{size:o,rovingFocusGroupRootStyle:g,tabIndex:t,dropdownKls:O,role:a,triggerId:p,dropdownListWrapperRef:G,handleKeydown:C=>{I(C),c(C)},onBlur:u,onFocus:v,onMousedown:b}}});function Xo(e,n,s,o,i,c){return S(),H("ul",{ref:e.dropdownListWrapperRef,class:W(e.dropdownKls),style:ee(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:ne(e.handleKeydown,["self"]),onMousedown:ne(e.onMousedown,["self"])},[k(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var Be=D(qo,[["render",Xo],["__file","dropdown-menu.vue"]]);const fn=we(Go,{DropdownItem:Pe,DropdownMenu:Be}),mn=he(Pe),vn=he(Be);export{pn as E,mn as a,vn as b,fn as c,Fo as d};
